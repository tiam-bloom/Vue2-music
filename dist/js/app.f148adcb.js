(function(e){function t(t){for(var a,n,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)n=c[l],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var c=r[n];0!==o[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},o={app:0},s=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-62fc9a45":"6fdf823f","chunk-a55893aa":"6ec28b9c","chunk-f3159e98":"63c8d541"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r={"chunk-62fc9a45":1,"chunk-a55893aa":1,"chunk-f3159e98":1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+"."+{"chunk-62fc9a45":"807fade1","chunk-a55893aa":"cb27b057","chunk-f3159e98":"9149facd"}[e]+".css",o=i.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===a||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete n[e],p.parentNode.removeChild(p),r(s)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){n[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,r){a=o[e]=[t,r]}));t.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var r=o[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",d.name="ChunkLoadError",d.type=a,d.request=n,r[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1e92":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Search"),t("router-view")],1)},o=[],s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("el-autocomplete",{staticStyle:{width:"300px"},attrs:{size:"medium",type:"text",placeholder:"请输入关键字搜索歌曲","prefix-icon":"el-icon-search","fetch-suggestions":e.querySearchAsync,"trigger-on-focus":!1,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),t("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-search"},on:{click:e.search}},[e._v("Search")])],1)},c=[],i=(r("14d9"),r("cee4")),u={name:"Search",computed:{keywords:{get(){return this.$store.state.search.keywords},set(e){this.$store.state.search.keywords=e}}},methods:{async search(){this.keywords.trim()?this.$router.push({name:"searchResult",params:{keywords:this.keywords,pageNO:1}}):this.$message({showClose:!0,message:"请输入关键字",type:"warning",duration:1e3})},querySearchAsync(e,t){i["a"].get("https://music-api.yujing.fit/search/suggest?keywords="+e).then(e=>{const{songs:r}=e.data.result;r.map(e=>{e.value=`${e.name}    ${e.artists[0].name}`}),t(r)}).catch(e=>{this.$message.error("搜索建议获取失败: "+e)})}}},l=u,d=(r("a1cd"),r("2877")),p=Object(d["a"])(l,s,c,!1,null,"b1890cf0",null),h=p.exports,f={name:"App",components:{Search:h}},m=f,g=(r("da53"),Object(d["a"])(m,n,o,!1,null,null,null)),y=g.exports,v=r("2f62"),w={namespaced:!0,mutations:{setLoading(e,t){e.loading=t}},state:{loading:!1}},k=r("8c4f");a["default"].use(k["a"]);let b=new k["a"]({routes:[{path:"/",redirect:{name:"home"}},{name:"home",path:"/home",component:()=>r.e("chunk-62fc9a45").then(r.bind(null,"57da"))},{name:"searchResult",path:"/search/:keywords?/:pageNO?",component:()=>r.e("chunk-f3159e98").then(r.bind(null,"2e90")),beforeEnter(e,t,r){e.params.keywords?r():(b.app.$message({message:"请输入关键字",type:"warning",showClose:!0,duration:1e3}),"home"!==t.name&&r({name:"home"}))}},{name:"error",path:"/error",component:()=>r.e("chunk-a55893aa").then(r.bind(null,"3fb9"))}]});async function O(e,t){C.commit("search/setKeywords",e),C.commit("search/setCurPageNO",+t||1),C.commit("pageState/setLoading",!0),await C.dispatch("search/getSongs",{keywords:e,pageNO:t}),C.commit("pageState/setLoading",!1)}b.afterEach(e=>{var t;"searchResult"===e.name&&O(e.params.keywords,null===(t=e.params)||void 0===t?void 0:t.pageNO)});var S=b,x={namespaced:!0,actions:{async getSongs(e,{keywords:t,pageNO:r=1}){1===r&&e.commit("setCurPageNO",r),await i["a"].get(`https://music-api.yujing.fit/cloudsearch?keywords=${t}&offset=${r}`).then(t=>{e.commit("setSongs",t.data.result.songs),e.commit("setTotal",t.data.result.songCount),e.dispatch("message",{message:"bingo!",type:"success"})}).catch(t=>{console.log(t),e.dispatch("message",{message:"出错了嘞, "+t,type:"error",duration:1e4}),S.push({name:"error"})})},async playMusic(e,t){let r=t.id;await i["a"].get("https://music-api.yujing.fit/song/url?id="+r).then(t=>{var r,a,n;let o=null===t||void 0===t||null===(r=t.data)||void 0===r||null===(a=r.data[0])||void 0===a?void 0:a.url;200!=(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code)&&o?e.dispatch("message",{message:"换首歌试试叭，这首歌好像不能播放",type:"warning"}):window.open(o)}).catch(t=>{e.dispatch("message",{message:"出错了嘞, "+t,type:"error",duration:1e4}),S.push({name:"error"})})},message(e,{duration:t=1e3,message:r,type:a}){this._vm.$message({duration:t,showClose:!0,message:r,type:a})}},mutations:{setKeywords(e,t){e.keywords=t},setSongs(e,t){e.songs=t},setTotal(e,t){e.total=t},setCurPageNO(e,t){e.curPageNO=t}},state:{keywords:"",songs:[],total:0,curPageNO:1}};a["default"].use(v["a"]);var C=new v["a"].Store({modules:{pageState:w,search:x}}),j=r("5c96"),_=r.n(j);r("0fae");a["default"].config.productionTip=!1,a["default"].use(_.a),new a["default"]({store:C,router:S,render:e=>e(y),beforeCreate(){console.log("%c摩西摩西, 欢迎!","color: #fff; background: #f40; font-size: 24px;border-radius:0 15px 15px 0;padding:10px;"),console.log("%c                                           ","background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:5em;width:1px;height:40px;padding:2px;")}}).$mount("#app")},a1cd:function(e,t,r){"use strict";r("1e92")},c832:function(e,t,r){},da53:function(e,t,r){"use strict";r("c832")}});
//# sourceMappingURL=app.f148adcb.js.map